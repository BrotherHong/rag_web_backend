"""
RAG-specific Prompt Templates
"""

# Document classification prompt
DOCUMENT_CLASSIFICATION = """請分析以下文檔內容，判斷文檔類型：

如果文檔主要是「要資料填寫」或「申請用文件」（如申請書、申請表、通知單、報告書、簽辦表），請回答「Form Mode」。
如果文檔包含「知識性內容」或「資訊性內容」（如教學、流程說明、操作指引、通訊錄、組織架構），請回答「Info Mode」。

請只回答「Form Mode」或「Info Mode」，不要其他說明。

文檔內容：
{text}"""

# Simple summary for form documents
FORM_DOCUMENT_SUMMARY = """這是一個表單類文檔，請簡潔摘要其用途和基本資訊：

文檔名稱：{filename}

摘要要求：
1. 說明文檔的主要用途
2. 指出適用對象或部門
3. 列出需要填寫的主要欄位或資訊（如有）
4. 保持簡潔，重點突出可搜尋的關鍵詞
5. 控制在 200 字以內

文檔內容：
{text}"""

# RAG answer generation with concise CoT and citations
RAG_ANSWER_PROMPT = """你是專業的文檔查詢助手，請基於提供的文檔回答問題。

<回答規則>
1. 直接回答問題，不要加入「根據文檔」等開場白。
2. 回答以「條列式」呈現。
3. 每一點回答後面都要加上「（來源：文檔X）」以標明該段使用的文檔。
4. 不可編造文檔外的資訊。
5. 提供的文檔已經去重，每個檔案只會出現一次（文檔1、文檔2等），請直接引用對應的文檔編號。
6. 引用區塊僅列出實際使用到的文檔，並提供足以對照回答內容的30-50字原文片段。
</回答規則>

<回答格式>
回答：
- 內容……（來源：文檔X）
- 內容……（來源：文檔X）

引用：
- 文檔1(檔名)：「……」
- 文檔2(檔名)：「……」
</回答格式>

問題：{query}

文檔：
{context}

根據回答規則進行回答：
"""

# RAG document summary - optimized for semantic retrieval
RAG_DOCUMENT_SUMMARY = """你是一個專業的文檔摘要生成器。請根據以下文檔內容，生成適合用於語義檢索（cosine 相似度）的摘要。

文檔標題：{filename}
文檔內容：{text}

要求：
1. 保留文件的主要內容與核心概念（主題、流程、規範、規則、定義、條件）。
2. 特別保留人名、地點、單位、專有名詞，避免遺漏。
3. 產生可供檢索的關鍵詞（3-5個）。
4. 產生使用者可能會提出的常見問題（至少 3 個），用不同問法來增加語意多樣性。
5. 摘要要足夠長，能涵蓋整個 chunk 的資訊，但不需要逐字翻譯。

## 輸出格式（請用 YAML 格式輸出）

```yaml
title: <文件標題，如可從內容判斷則填寫，否則留空>
doc_type: <文件類型，如 教學/流程/規範>
summary: |
  <完整摘要，涵蓋文檔主要內容>
keywords:
  - <關鍵詞1>
  - <關鍵詞2>
  - <關鍵詞3>
query_variants:
  - "<使用者可能會問的問題1>"
  - "<使用者可能會問的問題2>"
  - "<使用者可能會問的問題3>"
```"""


# RAG query response prompt with Chain of Thought
RAG_QUERY_PROMPT = """你是一個智能文檔助理，專門幫助用戶從文檔庫中找到和分析信息。

基於以下檢索到的相關文檔內容，請回答用戶的問題。

用戶問題：{query}

相關文檔內容：
{context}

請按照以下步驟思考並回答：

<思考過程>
1. 分析問題的核心需求
2. 檢視文檔內容中的相關資訊
3. 判斷是否有足夠資訊回答問題
4. 組織答案的邏輯結構
</思考過程>

<回答>
請直接、清晰地回答用戶的問題，不需要說「根據某某文檔」之類的開場白。

回答要求：
1. 直接針對問題給出答案
2. 答案要準確、完整、易懂
3. 使用條列式或分段方式呈現（如果適合）
4. 如果文檔中沒有足夠資訊，請明確說明「目前資料庫中沒有相關資訊」
5. 不要編造或推測文檔中沒有的內容
</回答>

請開始你的回答："""

# No results found prompt
RAG_NO_RESULTS_PROMPT = """抱歉，資料庫中沒有找到與您的問題相關的文檔。

建議您可以：
- 使用不同的關鍵詞重新提問
- 嘗試更具體或更寬泛的問法"""
